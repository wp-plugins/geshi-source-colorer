jQuery(document).ready(function(){jQuery(".geshisourcecolorer-option .invisible .form-table").hide();jQuery(".geshisourcecolorer-option .invisible h3").hover(function(){jQuery(this).data("bg-before",jQuery(this).css("background-color"));jQuery(this).css("background-color","#bababa")},function(){jQuery(this).css("background-color",jQuery(this).data("bg-before"))});jQuery(".geshisourcecolorer-option .invisible h3").click(function(){jQuery(this).parent().find(".form-table:first").toggle("slow")});jQuery("#geshisourcecolorer-styleselect").append(function(){jQuery("#geshisourcecolorer-styleselect").data("obj",jQuery.parseJSON(jQuery("#jsonstyle").val()));jQuery.each(jQuery("#geshisourcecolorer-styleselect").data("obj"),function(key,val){jQuery("#geshisourcecolorer-styleselect").append(jQuery("<option></option>").val(key).html(key))});jQuery.each(jQuery("#geshisourcecolorer-styleselect").data("obj")["default"],function(key,val){jQuery("#geshisourcecolorer-"+key).val(val)});jQuery("#geshisourcecolorer-stylename").val("default")});jQuery("#geshisourcecolorer-styleselect").change(function(){var name="";jQuery("#geshisourcecolorer-styleselect option:selected").each(function(){name=jQuery(this).val()});jQuery.each(jQuery(this).data("obj")[name],function(key,val){jQuery("#geshisourcecolorer-"+key).val(val)});jQuery("#geshisourcecolorer-stylename").val(name)});jQuery("#geshisourcecolorer-styledelete").click(function(){var name="";jQuery("#geshisourcecolorer-styleselect option:selected").each(function(){name=jQuery(this).val()});if(name=="default")alert(geshisourcecolorer_messages.defaultdelete);else{delete jQuery("#geshisourcecolorer-styleselect").data("obj")[name];jQuery("#geshisourcecolorer-styleselect").empty();jQuery.each(jQuery("#geshisourcecolorer-styleselect").data("obj"),function(key){jQuery("#geshisourcecolorer-styleselect").append(jQuery("<option></option>").val(key).html(key))});jQuery("#jsonstyle").val(JSON.stringify(jQuery("#geshisourcecolorer-styleselect").data("obj")))}});jQuery("#geshisourcecolorer-stylesave").click(function(){var name="";jQuery("#geshisourcecolorer-styleselect option:selected").each(function(){name=jQuery(this).val()});name=prompt(geshisourcecolorer_messages.save,name);if(name!=""){name=name.toLowerCase();var obj=new Object();jQuery.each(jQuery("#geshisourcecolorer-styleselect").data("obj")["default"],function(key,val){obj[key]=jQuery("#geshisourcecolorer-"+key).val()});jQuery("#geshisourcecolorer-styleselect").data("obj")[name]=obj;jQuery("#geshisourcecolorer-styleselect").empty();jQuery.each(jQuery("#geshisourcecolorer-styleselect").data("obj"),function(key){var opt=jQuery("<option></option>").val(key).html(key);if(key==name)opt.attr("selected","selected");jQuery("#geshisourcecolorer-styleselect").append(opt)});jQuery("#jsonstyle").val(JSON.stringify(jQuery("#geshisourcecolorer-styleselect").data("obj")))}});jQuery("#geshisourcecolorer-stylepreview").click(function(){var source=jQuery("#geshisourcecolorer-previewcode").val();var lang="";jQuery("#geshisourcecolorer-previewlanguage option:selected").each(function(){lang=jQuery(this).val()});if(source=="")alert(geshisourcecolorer_messages.previewemptycode);else{var obj=new Object();jQuery.each(jQuery("#geshisourcecolorer-styleselect").data("obj")["default"],function(key,val){obj[key]=jQuery("#geshisourcecolorer-"+key).val()});jQuery.post(ajaxurl,{"action":"geshisourcecolorer-preview","style":obj,"source":source,"lang":lang},function(response){jQuery("#geshisourcecolorer-preview").html(response)})}})});